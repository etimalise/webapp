{
  "name": "webapp-dev",
  "image": "mcr.microsoft.com/devcontainers/base:debian",
  "runArgs": [
    "--name", "webapp-dev",
    "--hostname", "webapp-dev",
    "--label", "project=webapp",
    "-p","5173:5173"
  ],
  "workspaceFolder": "/workspaces/webapp",

  "features": {
    "ghcr.io/devcontainers/features/common-utils:2": { "installZsh": false },
    "ghcr.io/devcontainers/features/node:1": { "version": "20" },
    "ghcr.io/devcontainers-contrib/features/pnpm:2": { "version": "10" },
    "ghcr.io/devcontainers/features/git:1": { "installLFS": true },
    "ghcr.io/devcontainers/features/github-cli:1": {}
  },

  "mounts": [
    "type=volume,source=pnpm-store,target=/vol/pnpm-store",
    "type=volume,source=node_modules,target=${containerWorkspaceFolder}/node_modules"
  ],

  "remoteUser": "vscode",
  "updateRemoteUserUID": true,

  "containerEnv": {
    "NO_UPDATE_NOTIFIER": "1",
    "COREPACK_ENABLE_DOWNLOAD_PROMPT": "0",
    "PNPM_HOME": "$HOME/.pnpm",
    "PNPM_STORE_DIR": "/vol/pnpm-store"
  },

  "postCreateCommand": "bash .devcontainer/bootstrap.sh",
  "forwardPorts": [5173]
}
